\chapter{Solutions for Chapter 2}

\ex{2.1}
In order to solve this problem, many assumptions must be made.
Different people may assume slightly different values for parameters.
This is OK.
What is important is making good assumptions and checking our conclusions to make sure they are reasonable.

To solve for the current in the LED, let us assume we know the LED is red, so it follows the red LED curve from Figure 2.8 in the book.
Let us also assume the transistor is acting like a closed switch, so the collector voltage of Q1 is close to \SI{0}{\V}.
Let us also assume the LED is ON, so it's voltage is approximately $V_\text{LED} = \SI{2}{V}$. From the preceding assumptions, we can calculate that the LED current is
\[I_\text{LED} = \frac{\SI{3.3}{\V} - \SI{2}{\V}}{\SI{330}{\ohm}} = \frac{\SI{1.3}{\V}}{\SI{330}{\ohm}} \approx \SI{3.94}{\mA}\]
If we use Figure 2.8 (from the textbook) to check our numbers, we see that a current of \SI{3.94}{\mA} roughly correlates to an LED voltage of $V_\text{LED} = \SI{1.7}{V}$.  We will run the same calculation again to reduce our error.
\[I^{*}_\text{LED} = \frac{\SI{3.3}{\V} - \SI{1.7}{\V}}{\SI{330}{\ohm}} = \frac{\SI{1.6}{\V}}{\SI{330}{\ohm}} \approx \mans{\SI{4.85}{\mA}}\]

In order to determine the minimum current gain required from our transistor, we must calculate the base current.
Let us assume we know the base-emitter voltage $V_\text{BE} = \SI{0.6}{\V}$.
Therefore
\[I_\text{B} = \frac{\SI{3.3}{\V} - \SI{0.6}{\V}}{\SI{10}{\kohm}} = \SI{270}{\uA}\]
So the minimum current gain must be
\[\beta_\text{min} = \frac{I^{*}_\text{LED}}{I_\text{B}} \approx \frac{\SI{4.85}{\mA}}{\SI{270}{\uA}} \approx \mans{18.0}\]


\ex{2.2}
When $Q_1$ goes is in saturation, the base voltage of $Q_2$ equals the opposite of the voltage on the capacitor $C_1$ at $t = \SI{0}{\second}$, $V_0 = \SI{4.4}{\volt}$ and $Q_2$ is then cutoff. $V_\text{out}$ will be equal to \SI{5}{\volt} until $Q_2$ is brought in saturation again. This happens when its base voltage gets higher or equal to the $Q_2$ threshold voltage (\SI{0.6}{\volt}). As soon as $Q_1$ is brought in saturation, $C_1$ starts to discharge into the resistor $R_3$ and the equivalent circuit, valid until $Q_2$ is cutoff, is then:
\begin{circuit}{fig:2.2.1}{Equivalent $C_1$ discharging circuit.}
    (0,0) node[ground] {}
    to[C, l=$C_1$,v=$V_\text{C}$] ++(0,2)
    to[R, l=$R_3$] ++(2.5,0)
    node[above] {+\SI{5}{\volt}} node[ocirc] {}
\end{circuit}
The time evolution of the voltage across the capacitor $C_1$ is given by:
\[V_\text{C}(t)=\left(V_0-V_\infty\right)e^{-\frac{t}{R_3C_1}}+V_\infty\]
where $V_\infty$ is the steady-state voltage on the capacitor $C_1$ end equals \SI{-5}{\volt}. Given the considerations above, we have that $V_C(t=T_\text{pulse})=\SI{-0.6}{\volt}$. Solving for $t$ gives:
\[T_\text{pulse}=-R_3C_1\ln\left(\frac{\SI{-0.6}{\volt}-V_\infty}{{V_0-V_\infty}}\right)=\mans{0.76R_3C_1=\SI{76}{\micro\second}}\]


\ex{2.3}
The output voltage is now influenced by $R_5$ that goes in series with $R_4$, and by the $V_\text{BE}$ of $Q_3$ which is equal to \SI{0.6}{\volt} when the transistor is in saturation. Therefore:
\[V_\text{out}=\frac{R_5}{R_5+R_4}\left(\SI{5}{\volt}-\SI{0.6}{\volt}\right)+\SI{0.6}{\volt}=\mans{\SI{4.79}{\volt}}\]

The minimum value of $\beta$ of $Q_3$ can be obtained looking at the maximum value of the current flowing through the collector of $Q_3$, $I_\text{c}^{\text{Q}_3}$. As soon as $Q_1$ goes in saturation, the capacitor $C_1$ starts to discharge and its current is given by $C_1dV_\text{C}/dt$. With reference to the variables introduced in the previous exercise (2.2):
\[I_\text{c}^{\text{Q}_3}(t)=\frac{\SI{5}{\volt}}{R_2}-I_{\text{C}_1}(t)=\frac{\SI{5}{\volt}}{R_2}+C_1\frac{1}{R_3C_1}\left(V_0-V_\infty\right)e^{-\frac{t}{R_3C_1}}\]
Therefore:
\[\beta_\text{min}=\frac{I_\text{c}^{\text{Q}_3}(t)|_\text{max}}{I_\text{b}^{\text{Q}_3}}=\frac{I_\text{c}^{\text{Q}_3}(t=\SI{0}{\second})}{I_\text{b}^{\text{Q}_3}}=\mans{27}\]


\ex{2.4}
\begin{circuit}{fig:2.4.1}{Emitter follower circuit used for computing the output resistance}
    (0,0) node[npn] (Q) {Q}
    (Q.B) to[short, i_<=$i_\text{b}$] ++(-1,0) -- ++(0,-.5) 
    to[R, l=$R_\text{S}$, v=$v_\text{Rs}$] ++(0,-2)
    node[ground] {}
    (Q.C) to[short, i_<=$i_\text{c}$] ++(0,.5) node[ground, rotate=180] {}
    (Q.E) to[short, i_>=$i_\text{e}$] ++(0,-.5) coordinate(RE)
    to[R, l=$R_\text{E}$,i=$i_\text{Re}$] ++(0,-2)
    node[ground] {}
    (RE) -- ++(3,0)
    to[I, l=$i_\text{out}$, invert, v_>=$v_\text{out}$] ++(0,-2)
    node[ground] {}
\end{circuit}

Applying the KCL on the Q transistor:
\[i_\text{e}=i_\text{b}+i_\text{c}=i_\text{b}\left(\beta+1\right)\]
The current flowing through the emitter resistor $R_\text{E}$ is equal to:
\[i_\text{Re}=i_\text{e}+i_\text{out}=i_\text{b}\left(\beta+1\right)+i_\text{out}\]
Since for the emitter follower $v_\text{Rs}=v_\text{out}$:
\[\left[i_\text{b}\left(\beta+1\right)+i_\text{out}\right]R_\text{E}=v_\text{out}\]
Since:
\[i_\text{b}=-\frac{v_\text{Rs}}{R_\text{S}}=-\frac{v_\text{out}}{R_\text{S}}\]
we can write:
\[\left[-\frac{v_\text{out}}{R_\text{S}}\left(\beta+1\right)+i_\text{out}\right]R_\text{E}=v_\text{out}\]
Therefore:
\[R_\text{out}=\frac{v_\text{out}}{i_\text{out}}=\frac{R_\text{E}R_\text{S}}{R_\text{S}+\left(\beta+1\right)R_\text{E}}\]
If $R_\text{E}>>R_\text{S}/(\beta+1)$:
\[\mans{R_\text{out}\approx\frac{R_\text{S}}{\left(\beta+1\right)}}\]


\ex{2.5}
\begin{circuit}{fig:2.5.1}{Small signal circuit}
    (0,0) node[npn] (Q) {Q}
    (Q.B) to[short, i_<=$i_\text{b}$] ++(-1,0) coordinate(RP)
    -- ++(0,-.5) 
    to[R, l=$R_2$, v=$v_\text{in}$] ++(0,-2)
    node[ground] {}
    (RP) -- ++(0,.5)
    to[R, l=$R_1$] ++(0,2)
    -- ++(-3,0)
    to[sV=\SI{15}{\volt}] ++(0,-2)
    node[ground] {}
    (Q.C) to[short, i_<=$i_\text{c}$] ++(0,.5) node[ground, rotate=180] {}
    (Q.E) to[short, i_>=$i_\text{e}$] ++(0,-.5) coordinate(RE)
    to[R, l=$R_\text{L}$] ++(0,-2)
    node[ground] {}
\end{circuit}

In order to achieve a maximum voltage change of \SI{5}{\percent} for a maximum current to the load ($R_\text{L}$) equal to \SI{25}{\milli\ampere}, we can make reference to the equivalent circuit of Figure \ref{fig:2.5.2}:
\begin{circuit}{fig:2.5.2}{Output equivalent circuit}
    (0,0) node[ground] {}
    to[sV,v_<=$v_\text{out}$, invert] ++(0,2)
    to[short, i=$i_\text{out}$] ++(.5,0)
    to[R,l=$R_\text{out}$] ++(2,0)
    -- ++(.5,0)
    to[R,l=$R_\text{L}$, v=$v_\text{L}$] ++(0,-2)
    node[ground] {}
\end{circuit}
obtaining:
\[\left.\frac{v_\text{out}-v_\text{L}}{v_\text{out}}\right\rvert_{i_\text{out}=\SI{25}{\milli\ampere}}=0.05\]
Since
\[v_\text{out}-R_\text{out}\,i_\text{out}=v_\text{L}\]
and for an emitter follower $v_\text{out}=v_\text{in}=\SI{5}{\volt}$
we can write:
\[\frac{R_\text{out}\,\SI{25}{\milli\ampere}}{\SI{5}{\volt}}=0.05\]
obtaining the following condition on $R_\text{out}$:
\[R_\text{out}=\frac{0.05\,\SI{5}{\volt}}{\SI{25}{\milli\ampere}}\]
For the emitter follower configuration:
\[R_\text{out}=\frac{R_\text{in}}{\beta+1}\]
and we see from the circuit of Figure \ref{fig:2.5.1} that $R_\text{in}$ is given by the parallel between $R_\text{1}$ and $R_\text{2}$:
\[R_\text{in}=\frac{R_\text{1}\,R_\text{2}}{R_\text{1}+R_\text{2}}\]
In order to achieve $v_\text{in}=\SI{5}{\volt}$, the following condition must be verified for the values of $R_\text{1}$ and $R_\text{2}$:
\[\frac{R_\text{2}}{R_\text{1}+R_\text{2}}=\frac{\SI{5}{\volt}}{\SI{15}{\volt}}\]
Assuming $\beta=100$, we can finally obtain:
\[\mans{R_\text{1}=\SI{30}{\ohm},\,R_\text{2}=\SI{15}{\ohm}}\]


\ex{2.6}
The minimum current flowing through the $R$ resistor has to be at least equal to the maximum current to the load plus the minimum current to the zener:
\[I_\text{min,R}=\frac{\SI{20}{\volt}-\SI{10}{\volt}}{R}\geq\SI{100}{\milli\ampere}+\SI{10}{\milli\ampere}\]
Therefore:
\[R\leq \frac{\SI{10}{\volt}}{\SI{110}{\milli\ampere}}=\mans{\SI{91}{\ohm}}\]
It follows that the maximum power to the zener, selecting $R=\SI{91}{\ohm}$, is equal to
\[P_\text{max,z}=\left(\frac{\SI{25}{\volt}-\SI{10}{\volt}}{\SI{91}{\ohm}}-\SI{0}{\ampere}\right)\SI{10}{\volt}=\mans{\SI{1.65}{\watt}}\]


\ex{2.7}
With reference to figure 2.21 of the book, neglecting the current entering the ase of the transistor $Q$, in order to have at least \SI{10}{\milli\ampere} flowing through the zener, the resistor $R$ should comply with the following condition:
\[\frac{\SI{20}{\volt}-\SI{10}{\volt}}{R}\geq\SI{10}{\milli\ampere}\]
which results in:
\[\mans{R\leq\SI{1}{\kilo\ohm}}\]
In order to avoid the transistor to be saturated, we want the collector-base voltage to be always higher than zero. This translates in:
\[R_\text{C}<R\frac{\SI{10}{\milli\ampere}}{\SI{100}{\milli\ampere}}=\SI{100}{\ohm}\]
Selecting a conservative value of $R_\text{C}$ equal to \tans{\SI{20}{\ohm}}, we can compute the maximum power dissipated by the zener, $P_\text{max,z}$ and the transistor, $P_\text{max,Q}$ as:
\[P_\text{max,z}=\left(\frac{\SI{25}{\volt}-\SI{10}{\volt}}{\SI{1}{\kilo\ohm}}\right)\SI{10}{\volt}=\mans{\SI{0.15}{\watt}}\]
\[P_\text{Q}=\left(\SI{25}{\volt}-\SI{20}{\ohm}I_\text{load}\right)I_\text{load}\]
The maximum power dissipated by the transistor is obtained for a collector current equal to \SI{625}{\milli\ampere} which is higher than the maximum load current. Therefore, in our case, the maximum power dissipated by $Q$ will be obtained for $I_\text{load,max}=\SI{100}{\milli\ampere}$:
\[P_\text{max,Q}=\left(\SI{25}{\volt}-\SI{20}{\ohm}I_\text{load,max}\right)I_\text{load,max}=\mans{\SI{2.3}{\watt}}\]
Comparing the results with those of the previous exercise, we notice that the power disspated by the zener diode significantly decreased but we have an additional power dissipated by the transistor which is higher than the power that the zener diode dissipated in the circuit of the previous exercise. However this power can be decreased by increasing the value of $R_\text{C}$.


\ex{2.8}
In order to keep the emitter voltage $V_\text{E}$ in the half range of the dc supply, considering the quiescent current of \SI{5}{\milli\ampere} we have:
\[V_\text{E}=\frac{\SI{15}{\volt}-(-\SI{15}{\volt})}{2}=\SI{15}{\volt}\]
and the emitter resistor $R_\text{E}$:
\[R_\text{E}=\frac{\SI{15}{\volt}}{\SI{5}{\milli\ampere}}=\mans{\SI{3}{\kilo\ohm}}\]
Since the imput impedance to the transistor, under the assumption of a load resistance much larger than the emitter resistance, is:
\[R_\text{in}=\beta R_\text{E}=\SI{300}{\kilo\ohm}\]
in order to have the \SI{3}{\decibel} point below the lowest frequency of \SI{20}{\hertz}, the capacitor $C_1$ has to be:
\[\frac{1}{R_\text{in}C_1}\leq \SI{20}{\hertz}\]
meaning that:
\[\mans{C_1\geq\SI{0.17}{\micro\farad}}\]


\ex{2.9}
\begin{circuit}{fig:2.9.1}{Current source circuit}
    (0,0) node[ground] {}
    to[V,v_<=$V_\text{S}$, invert] ++(0,2)
    -- ++(1,0)
    to[R, l=$R$] ++(2,0)
    to[short,i=$I_\text{load}$] ++(1,0)
    node[ocirc] {}
    to[open,v=$V_\text{load}$] ++(0,-2)
    node[ocirc] {}
    node[ground] {}
\end{circuit}
We want:
\[\frac{I_\text{load}^\text{max}-I_\text{load}^\text{min}}{I_\text{load}^\text{max}}=\frac{V_\text{S}-\SI{0}{\volt}-(V_\text{S}-\SI{10}{\volt})}{V_\text{S}-\SI{0}{\volt}}=0.01\]
from which it follows:
\[\mans{V_\text{S}=\SI{1}{\kilo\volt}}\]


\ex{2.10}
With reference to Figure \ref{fig:2.9.1}, we assume that $I_\text{load}$ is equal to \SI{10}{\milli\ampere} if $V_\text{load}$ is equal to \SI{0}{\volt}, which means $R_\text{load}$ is equal to \SI{0}{\ohm}. We can therfore calculate $R$ as:
\[R=\frac{V_\text{S}}{\SI{10}{\milli\ampere}}=\SI{100}{\kilo\ohm}\]
In this case we have:
\[\mans{P_\text{load}=\SI{0}{\watt},\,P_\text{R}=I_\text{load}^2R=\SI{10}{\watt}}\]
If $V_\text{load}=\SI{10}{\volt}$, from the condition of the previous exercise, we have:
\[I_\text{load}=(1-0.01)\SI{10}{\milli\ampere}=\SI{9.9}{\milli\ampere}\]
Therefore:
\[\mans{P_\text{load}=\SI{10}{\volt}I_\text{load}=\SI{0.1}{\watt},\,P_\text{R}=I_\text{load}^2R=\SI{9.8}{\watt}}\]

\ex{2.11}
\begin{circuit}{fig:2.11.1}{Current sink}
    (0,0) node[npn] (Q) {Q}
    (Q.B) to[short] ++(-1,0) coordinate(RP)
    -- ++(0,-.5) 
    to[R, l=$R_2$] ++(0,-2)
    node[ground] {}
    (RP) -- ++(0,.5)
    to[R, l=$R_1$] ++(0,2)
    node[above]{+\SI{5}{\volt}} node[ocirc] {}
    (Q.C) to[short] ++(0,.5)
    to[generic, l=load] ++(0,1.5)
    node[above] {+\SI{5}{\volt}} node[ocirc] {}
    (Q.E) to[short] ++(0,-.5) coordinate(RE)
    to[R, l=$R_\text{E}$] ++(0,-2)
    node[ground] {}
\end{circuit}

In order to have an emitter current equal to \SI{5}{\milli\ampere}, the following condition has to be verified:
\[\frac{R_2}{R_1+R_2}\SI{5}{\volt}-\SI{0.6}{\volt}=R_\text{E}\SI{5}{\milli\ampere}\]
Furthermore, the transistor shouldn't sensibly load the voltage divider, therefore:
\[\frac{R_1R_2}{R_1+R_2}<<R_\text{E}\beta\]
Since we have a dc voltage of \SI{5}{\volt}, we want the voltage on $R_2$ to be lower or equal to this value:
\[R_\text{E}\SI{5}{\milli\ampere}+\SI{0.6}{\volt}\leq\SI{5}{\volt}\]
leading to:
\[R_\text{E}\leq\SI{880}{\ohm}\]
A good guess value for $R_\text{E}$ could be:
\[\mans{R_\text{E}=\SI{200}{\ohm}}\]
The base voltage will be given by:
\[V_\text{B}=R_\text{E}\SI{5}{\milli\ampere}+\SI{0.6}{\volt}=\SI{1.6}{\volt}\]
Selecting $\mans{R_1=\SI{1}{\kilo\ohm}}$ it is possible to compute  $R_2$:
\[\mans{R_2=\SI{470}{\ohm}}\]
The impedance seen by the input of the transistor is equal to \SI{320}{\ohm} and the input impedance of the transistor, considering $\beta=100$, is $R_\text{E}\beta=  \SI{20}{\kilo\ohm}$ with the former much lower than the latter.
Finally, considering a maximum $V_\text{CE}$ voltage of the transistor equal to \SI{0.2}{\volt} before it saturates, we obtain the compliance voltage on the load as:
\[\mans{V_\text{comp}=\SI{5}{\volt}-(\SI{0.2}{\volt}+R_\text{E}\SI{5}{\milli\ampere})=\SI{3.8}{\volt}}\]

\ex{2.12}
The distortion is given by:
\[\frac{\Delta V_\text{out}}{V_\text{drop}}\frac{V_\text{T}}{V_\text{T}+I_\text{E}R_\text{E}}\]
therefore, if $R_\text{E}=\SI{0}{\ohm}$ we obtain a predicted distortion equal to $\mans{\frac{\Delta G}{G}=\frac{\SI{0.2}{\volt}}{\SI{5}{\volt}}=0.04}$ in case of \SI{0.1}{\volt} output amplitude and $\mans{\frac{\Delta G}{G}=\frac{\SI{2}{\volt}}{\SI{5}{\volt}}=0.4}$ in case of \SI{1}{\volt} output amplitude. If $R_\text{E}I_\text{E}=\SI{0.25}{\volt}$, $\frac{\Delta G}{G}$ equals to \tans{0.004} and \tans{0.04} for output voltage amplitudes equal to \SI{0.1}{\volt} and \SI{1}{\volt}, respectively.

\ex{2.13}

If the transistor is biased at half $V_\text{cc}$, we have that the collector-emitter voltage will be equal to $V_\text{CE}=V_\text{cc}-I_\text{C}R_\text{C}=V_\text{cc}-V_\text{cc}/2=V_\text{cc}/2$ where $I_\text{C}$ is the collector quiescent current and $R_\text{C}$ is the collector resistor. The collector-base voltage will be therefore $V_\text{CB}=V_\text{cc}/2-V_\text{BE}$. In this case $V_\text{BE}$ is supposed to be obtained by means of a voltage divider. If the temperature changes, approximately $V_\text{BE}$ does not change and the collecotr current will increase by \SI{9}{\percent\per\celsius}. This means that the collector current doubles for a temperature increase equal to \SI{8}{\celsius}. In this case $R_\text{C}I_\text{C}$ becomes equal to $2V_\text{cc}/2=V_\text{cc}$. As a consequence \tans{$V_\text{CB}=-V_\text{BE}<0$ and the transistor goes in saturation.}

\ex{2.14}
The bias is arranged in order to have a collector current equal to \SI{1}{\milli\ampere}. Indeed:
\[I_\text{c}=\frac{\SI{0.775}{\volt}-\SI{0.6}{\volt}}{\SI{175}{\ohm}}=\SI{1}{\milli\ampere}\]
The base-emitter voltage decreases by \SI{2.1}{\milli\volt\per\celsius}. Therefore, if the temperature increases by \SI{20}{\celsius}, the collecotr current will become:
\[I_\text{c}=\frac{\SI{0.775}{\volt}-\SI{0.6}{\volt}-\SI{0.0021}{\volt\per\celsius}\,\SI{20}{\celsius}}{\SI{175}{\ohm}}=\SI{0.76}{\milli\ampere}\]
\tans{It can be seen that the new collecotr current is about \SI{25}{\percent} lower than \SI{1}{\milli\ampere}}

\ex{2.15}
The voltage gain is given by:
\[G=\frac{V_\text{out}}{V_\text{in}}=\frac{R_\text{C}}{r_\text{e}}=\frac{I_\text{C}R_\text{C}}{V_\text{T}}\]
In order to achieve a voltage drop on $R_\text{C}$ equal to half the $V_\text{cc}$ voltage:
\[I_\text{C}R_\text{C}=\frac{1}{2}V_\text{cc}\]
and therefore:
\[R_\text{C}=\frac{1}{2}\frac{V_\text{cc}}{I_\text{C}}\]
Substituting the $R_\text{C}$ expression into the voltage gain:
\[\mans{G=\frac{1}{2}\frac{V_\text{cc}}{V_\text{T}}=\frac{V_\text{cc}}{\SI{50}{\milli\volt}}=20V_\text{cc}}\]

\ex{2.16}
\begin{circuit}{fig:2.16.1}{Tuned common emitter amplifier}
    (0,0) node[npn] (Q) {Q}
    (Q.B) to[short] ++(-1,0) coordinate(RP)
    -- ++(0,-.5) 
    to[R, l=$R_2$] ++(0,-2)
    node[ground] {}
    (RP) -- ++(0,.5)
    to[R, l=$R_1$] ++(0,2)
    -- ++(0,0.5) coordinate(Vcc)
    (RP) -- ++(-0.5,0)
    to[C, l=$C_\text{in}$] ++(-0.5,0)
    -- ++(-0.5,0)
    node[above] {$V_\text{in}$}
    node[ocirc] {}
    (Q.C) to[short] ++(0,.5)
    to[L, l=$L_\text{C}$] ++(0,1.5)
    to[short] (Vcc -| Q.C)
    (Q.C) to[short] ++(1.5,0)
    to[short] ++(0,.5) coordinate(Cc)
    to[C,l=$C_\text{C}$] ++(0,1.5)
    to[short] (Vcc -| Cc)
    (Q.C) to[short] ++(3,0)
    to[short] ++(0,.5) coordinate(Rc)
    to[R,l=$R_\text{C}$] ++(0,1.5)
    to[short] (Vcc -| Rc)
    (Vcc) to[short] ++(-0.5,0)
    (Vcc) to[short, l=$\SI{15}{\volt}$] ++(5,0)
    (Q.E) to[short] ++(0,-.5) coordinate(RE)
    to[R, l=$R_\text{E}$] ++(0,-2)
    node[ground] {}
    (Q.E) to[short] ++(1.5,0)
    to[C,l=$C_\text{E}$] ++(0,-2)
    node[ground] {}
\end{circuit}
With reference to Figure \ref{fig:2.16.1}, we start by choosing the emitter resistor $R_\text{E}$. We want its value to be large enough to have a voltage drop higher than $V_\text{BE}$ in order to have a good stability of the quiescent current with the temperature. However we want the transistor to operate in the active region. Since at DC, the inductor behaves like a short circuit, we have that the collector voltage is equal to $V_\text{cc}$, therefore:
\[R_\text{E}I_\text{E}^\text{Q}<V_\text{cc}-\SI{0.2}{\volt}\]
and
\[R_\text{E}<\frac{V_\text{cc}-\SI{0.2}{\volt}}{I_\text{E}^\text{Q}}=\SI{14.8}{\kilo\ohm}\]
where $I_\text{E}^\text{Q}$ is equal to about \SI{1}{\milli\ampere}.
We choose:
\[\mans{R_\text{E}=\SI{1}{\kilo\ohm}}\]
In order to achieve a quiescent current equal to \SI{1}{\milli\ampere}, the base voltage has to be equal to:
\[V_\text{B}=\SI{0.6}{\volt}+R_\text{E}I_\text{E}^\text{Q}=\SI{1.6}{\volt}\]
Therefore, the ratio between $R_1$ and $R_2$ has to be equal to \num{8.4}. Choosing the parallel resistance of $R_1$ and $R_2$ to be about one tenth of the transistor input resistance $\beta R_\text{E}\approx\SI{100}{\kilo\ohm}$ we choose the following values for $R_1$ and $R_2$:
\[\mans{R_1=\SI{84}{\kilo\ohm},\quad R_2=\SI{10}{\kilo\ohm}}\]
The value of the capacitor $C_\text{C}$ can be obtained forcing the parallel LC circuit to resonate at \SI{100}{\kilo\hertz}:
\[\frac{1}{2\pi}\sqrt{\frac{1}{L_\text{C}C_\text{C}}}=\SI{100}{\kilo\hertz}\]
Therefore:
\[\mans{C_\text{C}=\SI{2.5}{\nano\farad}}\]
The value of the capacitor $C_\text{E}$ can be selected imposing that the absolute value of the impedance of the parallel between $R_\text{E}$ and $C_\text{E}$ is lower than $r_\text{e}=\SI{25}{\ohm}$ for a quiescent current of \SI{1}{\milli\ampere}.
Doing the math we obtain:
\[C_\text{E}>\frac{\sqrt{\frac{R_\text{E}}{\SI{25}{\ohm}}^2-1}}{\omega R_\text{E}}=\SI{63.6}{\nano\farad}\]
A value of $C_\text{E}$ equal to \SI{10}{\micro\farad} is conservative enough to maximise the AC gain:
\[\mans{C_\text{E}=\SI{10}{\micro\farad}}\]
It remains to calculate the value of the input decoupling capacitor $C_\text{in}$. Its value can be obtained by forcing the cut-off frequency $1/R_\text{in}$ to be below \SI{100}{\kilo\hertz} where
\[R_\text{eq}=\beta r_\text{e} || R_1 || R_2\]
where we neglected the emitter impedance which is verly low thanks to the $C_\text{E}$ effect.
We have therefore:
\[C_\text{in} \geq \SI{5}{\nano\farad}\]
Even in this case a conservative value for $C_\text{in}$ can be:
\[\mans{C_\text{in}=\SI{10}{\micro\farad}}\]

\ex{2.17}
In the following, the pedix B, C and E refer to base, collector and emitter.
The apix Q1, Q2 and Q3 refer to the relevant transistors.
Supposing all the transistors share the same $\beta$, the $I_\text{P}$ currect can be expressed as:
\[I_\text{P}=I_\text{C}^\text{Q1}+I_\text{B}^\text{Q3}=\beta I_\text{B}^\text{Q1}+\frac{I_\text{C}^\text{Q3}}{\beta}\]
Since the base-emitter voltage of the transistor Q1 is the same of the transistor Q2, the base currents are the same. Therefore:
\[I_\text{B}^\text{Q1}+I_\text{B}^\text{Q2}=2I_\text{B}^\text{Q1}=I_\text{E}^\text{Q3}-I_\text{C}^\text{Q1}=\frac{\beta+1}{\beta}I_\text{C}^\text{Q3}-\beta I_\text{B}^\text{Q1}\]
and then:
\[I_\text{B}^\text{Q1}=\frac{\beta+1}{\beta(\beta+2)}I_\text{C}^\text{Q3}\]
Substituting this expression into the first equation, it is possible to obtain the following expression for $I\text{P}$:
\[I_\text{P}=\left(1+\frac{2}{\beta(\beta+2)}\right)I_\text{C}^\text{Q3}\approx I_\text{C}^\text{Q3}\]
By comparing the above expression with that that typical of a basic current mirror:
\[I_\text{P}=\left(1+\frac{2}{\beta}\right) I_\text{C}\]
one can see that the load current $ I_\text{C}^\text{Q3}$ is much colser to the reference current $I_\text{P}$ than for the basic current mirror. Indeed:
\[\frac{2}{\beta(\beta+2)}<<\frac{2}{\beta}\]

\ex{2.18}
For a grounded differential amplifier, the differential gain is:
\[G_\text{diff}=\frac{R_\text{C}}{2r_\text{e}}=\frac{R_\text{C}I_\text{C}}{2V_\text{T}}={V_\text{C}}{2V_text{T}}=\mans{20V_\text{C}}\]
where $V_\text{C}$ is the voltage drop across the collector resistor $R_\text{C}$. Therefore, if $V_\text{C}=0.5V_\text{cc}$:
\[\mans{G_\text{diff}=10V_\text{cc}}\]
Following a similar argument:
\[\text{CMRR}=\frac{R_1}{r_\text{e}}=\frac{R_1I_\text{C}}{V_\text{T}}=\frac{1}{2}{V_1}{V_\text{T}}=\mans{20V_1}\]
where $V_1$ is the voltage drop across the $R_1$ resistor.
\begin{circuit}{fig:2.18.1}{Tuned common emitter amplifier}
    (0,0) node[npn] (Q1) {$Q_1$}
    (Q1.B) node[left] {+}
    (Q1.C) to[short] ++(0,.5)
    to[R, l=$R_\text{C}$] ++(0,1.5)
    to[short] ++(0,+0.5) coordinate(RC1)
    (Q1.E) to[short] ++(0,-.5) 
    to[R, l=$R_\text{E}$] ++(0,-2) coordinate(RE1)
    (3,0) node[npn, xscale=-1] (Q2) {\ctikzflipx{$Q_2$}}
    (Q2.B) node[right] {-}
    (Q2.C) to[short] ++(0,.5)
    to[R, l=$R_\text{C}$] ++(0,1.5)
    to[short] ++(0,+0.5)
    (Q2.E) to[short] ++(0,-.5) coordinate(RE2)
    to[R, l=$R_\text{E}$] ++(0,-2)
    --(RE1)
    ++(1.5,0) to[short] ++(0,-0.5)
    to[R, l=$R_1$] ++(0,-2)
    to[short] ++(0,-0.5)
    node[below] {\SI{-5}{\volt}}
    (RC1) ++(-1,0) to[short] ++(5,0)
    node[above] {\SI{+5}{\volt}}
    (Q2.C) to[short] ++(1,0)
    node[above] {output}
\end{circuit}
For the differential, single-ended amplifier in Figure \ref{fig:2.18.1}, the output impedance is equal to $R_\text{C}$. Therefore we have $\mans{R_C=\SI{10}{\kilo\ohm}}$. Since we want the voltage drop on the collector resistor to be half of the $V_\text{cc}$:
\[\mans{I_\text{C}={\SI{2.5}{\volt}}\,{\SI{10}{\kilo\ohm}}=\SI{250}{\micro\ampere}}\]
Neglecting the voltage drop on the emitter resistor $R_\text{E}$, we can approximate the collector current as:
\[I_\text{C}\approx\frac{\SI{5}{\volt}-\SI{0.6}{\volt}}{2R_1}\]
and therefore:
\[\mans{R_1=\SI{2.8}{\kilo\ohm}}\]
The value of $R_\text{E}$ can then be obtained from the differential gain, considering that it is given by:
\[G_\text{diff}=25=\frac{R_\text{C}}{2\left(r_\text{e}+R_\text{E}\right)}\].
Therefore, considering that $r_\text{e}=V_text{T}/I_text{C}=\SI{100}{\ohm}$:
\[\mans{R_\text{E}=\SI{100}{\ohm}}\]

\todoex{2.19}

\todoex{2.20}

\todoex{2.21}

\todoex{2.22}

\todoex{2.23}

\todoex{2.24}

\todoex{2.25}

\todoex{2.26}

\todoex{2.27}

\todoex{2.28}

\todoex{2.29}

\todoex{2.30}  % the last Exercise in chapter 2.

% Here ends Chapter 2.
